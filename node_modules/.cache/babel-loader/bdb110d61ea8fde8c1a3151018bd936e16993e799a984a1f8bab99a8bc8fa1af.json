{"ast":null,"code":"import _slicedToArray from\"D:/Warcraft/AAW-Talent-Calculator-master/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useRef,useLayoutEffect}from\"react\";// TODO: should be hidden by default\nvar DEFAULT_POS=\"topRight\";export var useTooltipPos=function useTooltipPos(){var anchorRef=useRef(null);var tooltipRef=useRef(null);var _useState=useState(DEFAULT_POS),_useState2=_slicedToArray(_useState,2),tooltipPos=_useState2[0],setTooltipPos=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),tooltipVisible=_useState4[0],setTooltipVisible=_useState4[1];for(var _len=arguments.length,deps=new Array(_len),_key=0;_key<_len;_key++){deps[_key]=arguments[_key];}useLayoutEffect(function(){if(!tooltipVisible||!tooltipRef.current||!anchorRef.current){return;}var getPosition=function getPosition(){if(!tooltipRef.current||!anchorRef.current){return DEFAULT_POS;}var viewportHeight=window.innerHeight;var viewportWidth=window.innerWidth;var anchorRect=anchorRef.current.getBoundingClientRect();var tooltipRect=tooltipRef.current.getBoundingClientRect();var fitsTop=anchorRect.top>=tooltipRect.height;var fitsRight=viewportWidth-anchorRect.right>=tooltipRect.width;var rightDistance=Math.abs(viewportWidth-anchorRect.right-tooltipRect.width);var fitsBottom=viewportHeight-anchorRect.bottom>=tooltipRect.height;var fitsLeft=anchorRect.left>=tooltipRect.width;var leftDistance=Math.abs(anchorRect.left-tooltipRect.width);if(fitsTop&&fitsRight){return\"topRight\";}else if(fitsTop&&fitsLeft){return\"topLeft\";}else if(fitsBottom&&fitsRight){return\"bottomRight\";}else if(rightDistance>leftDistance){return\"mobileLeft\";}else if(rightDistance<leftDistance){return\"mobileRight\";}else if(fitsBottom&&fitsLeft){return\"bottomLeft\";}else{return DEFAULT_POS;}};setTooltipPos(getPosition());},[tooltipVisible].concat(deps));var showTooltip=function showTooltip(){return setTooltipVisible(true);};var hideTooltip=function hideTooltip(){return setTooltipVisible(false);};// TODO: consider memoizing this?\nreturn{anchorProps:{ref:anchorRef,onMouseEnter:showTooltip,onMouseLeave:hideTooltip},tooltipProps:{ref:tooltipRef,position:tooltipPos},tooltipVisible:tooltipVisible};};","map":{"version":3,"names":["useState","useRef","useLayoutEffect","DEFAULT_POS","useTooltipPos","anchorRef","tooltipRef","_useState","_useState2","_slicedToArray","tooltipPos","setTooltipPos","_useState3","_useState4","tooltipVisible","setTooltipVisible","_len","arguments","length","deps","Array","_key","current","getPosition","viewportHeight","window","innerHeight","viewportWidth","innerWidth","anchorRect","getBoundingClientRect","tooltipRect","fitsTop","top","height","fitsRight","right","width","rightDistance","Math","abs","fitsBottom","bottom","fitsLeft","left","leftDistance","concat","showTooltip","hideTooltip","anchorProps","ref","onMouseEnter","onMouseLeave","tooltipProps","position"],"sources":["D:/Warcraft/AAW-Talent-Calculator-master/src/hooks/useTooltipPos.ts"],"sourcesContent":["import { useState, useRef, useLayoutEffect } from \"react\";\r\n\r\n// TODO: should be hidden by default\r\nconst DEFAULT_POS = \"topRight\";\r\n\r\nexport type TooltipPos = \"topRight\" | \"topLeft\" | \"bottomRight\" | \"bottomLeft\" | \"mobileRight\" | \"mobileLeft\";\r\n\r\nexport const useTooltipPos = <T extends HTMLElement, U extends HTMLElement>(\r\n  // Optional dependencies for the positioning effect.\r\n  // Useful if the content of the tooltip can change while it's visible\r\n  ...deps: any[]\r\n) => {\r\n  const anchorRef = useRef<T | null>(null);\r\n  const tooltipRef = useRef<U | null>(null);\r\n  const [tooltipPos, setTooltipPos] = useState<TooltipPos>(DEFAULT_POS);\r\n  const [tooltipVisible, setTooltipVisible] = useState(false);\r\n\r\n  useLayoutEffect(() => {\r\n    if (!tooltipVisible || !tooltipRef.current || !anchorRef.current) {\r\n      return;\r\n    }\r\n    const getPosition = (): TooltipPos => {\r\n      if (!tooltipRef.current || !anchorRef.current) {\r\n        return DEFAULT_POS;\r\n      }\r\n      const viewportHeight = window.innerHeight;\r\n      const viewportWidth = window.innerWidth;\r\n      const anchorRect = anchorRef.current.getBoundingClientRect();\r\n      const tooltipRect = tooltipRef.current.getBoundingClientRect();\r\n\r\n      const fitsTop = anchorRect.top >= tooltipRect.height;\r\n      const fitsRight = viewportWidth - anchorRect.right >= tooltipRect.width;\r\n      const rightDistance = Math.abs(viewportWidth - anchorRect.right - tooltipRect.width);\r\n      const fitsBottom =\r\n        viewportHeight - anchorRect.bottom >= tooltipRect.height;\r\n      const fitsLeft = anchorRect.left >= tooltipRect.width;\r\n      const leftDistance = Math.abs(anchorRect.left - tooltipRect.width);\r\n\r\n      if (fitsTop && fitsRight) {\r\n        return \"topRight\";\r\n      } else if (fitsTop && fitsLeft) {\r\n        return \"topLeft\";\r\n      } else if (fitsBottom && fitsRight) {\r\n        return \"bottomRight\";\r\n      } else if (rightDistance > leftDistance) {\r\n        return \"mobileLeft\";\r\n      } else if (rightDistance < leftDistance) {\r\n        return \"mobileRight\";\r\n      } else if (fitsBottom && fitsLeft) {\r\n        return \"bottomLeft\";\r\n      } else {\r\n        return DEFAULT_POS;\r\n      }\r\n    };\r\n\r\n    setTooltipPos(getPosition());\r\n  }, [tooltipVisible, ...deps]);\r\n\r\n  const showTooltip = () => setTooltipVisible(true);\r\n  const hideTooltip = () => setTooltipVisible(false);\r\n\r\n  // TODO: consider memoizing this?\r\n  return {\r\n    anchorProps: {\r\n      ref: anchorRef,\r\n      onMouseEnter: showTooltip,\r\n      onMouseLeave: hideTooltip,\r\n    },\r\n    tooltipProps: { ref: tooltipRef, position: tooltipPos },\r\n    tooltipVisible,\r\n  };\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}