{"ast":null,"code":"import React from\"react\";import\"./Talent.css\";import talentBubble from\"../assets/talent-bubble.png\";import{useTooltipPos}from\"../hooks/useTooltipPos\";import{useTreeContext}from\"../TreeContext\";import{useTalentContext}from\"../TalentContext\";import{TalentTooltip}from\"./TalentTooltip\";import{SquareButton}from\"./SquareButton\";import{Arrow}from\"./Arrow\";import{getTalentRank,isTalentMaxed,isTalentUnlocked,getPointsLeft,getTalentData}from\"../TalentContext/selectors\";export var Talent=function Talent(_ref){var name=_ref.name;var tree=useTreeContext();var _useTalentContext=useTalentContext(),state=_useTalentContext.state,data=_useTalentContext.data,spendPoint=_useTalentContext.spendPoint,unspendPoint=_useTalentContext.unspendPoint;var _getTalentData=getTalentData(data,tree,name),pos=_getTalentData.pos,icon=_getTalentData.icon,arrows=_getTalentData.arrows;var pointsLeft=getPointsLeft(state);var rank=getTalentRank(state,tree,name);var maxed=isTalentMaxed(state,data,tree,name);var unlocked=isTalentUnlocked(state,data,tree,name);var _useTooltipPos=useTooltipPos(rank),anchorProps=_useTooltipPos.anchorProps,tooltipProps=_useTooltipPos.tooltipProps,tooltipVisible=_useTooltipPos.tooltipVisible;// TODO: too many edge cases here, hard to digest\n// move to a selector?\nvar talentState=function(){if(pointsLeft<1&&rank===0){return\"locked\";}if(maxed){return\"maxed\";}if(unlocked){return\"unlocked\";}return\"locked\";}();var outlineColor=function(){if(talentState===\"unlocked\"){return\"green\";}if(talentState===\"maxed\"){return\"gold\";}return\"grey\";}();return/*#__PURE__*/React.createElement(React.Fragment,null,arrows&&arrows.map(function(arrow,i){return/*#__PURE__*/React.createElement(Arrow,Object.assign({key:i,active:unlocked},arrow));}),/*#__PURE__*/React.createElement(\"div\",{className:\"Talent-container\",style:{gridArea:pos}},/*#__PURE__*/React.createElement(SquareButton,Object.assign({onClick:function onClick(){return spendPoint(tree,name);},onRightClick:function onRightClick(){return unspendPoint(tree,name);},icon:icon,disabled:talentState===\"locked\",outline:outlineColor},anchorProps)),talentState!==\"locked\"&&/*#__PURE__*/React.createElement(\"div\",{className:\"Talent-pointCount Talent-pointCount--\".concat(outlineColor),style:{backgroundImage:\"url(\".concat(talentBubble,\")\")}},rank),tooltipVisible&&/*#__PURE__*/React.createElement(TalentTooltip,Object.assign({name:name,tree:tree},tooltipProps))));};","map":{"version":3,"names":["React","talentBubble","useTooltipPos","useTreeContext","useTalentContext","TalentTooltip","SquareButton","Arrow","getTalentRank","isTalentMaxed","isTalentUnlocked","getPointsLeft","getTalentData","Talent","_ref","name","tree","_useTalentContext","state","data","spendPoint","unspendPoint","_getTalentData","pos","icon","arrows","pointsLeft","rank","maxed","unlocked","_useTooltipPos","anchorProps","tooltipProps","tooltipVisible","talentState","outlineColor","createElement","Fragment","map","arrow","i","Object","assign","key","active","className","style","gridArea","onClick","onRightClick","disabled","outline","concat","backgroundImage"],"sources":["D:/Warcraft/AAW-Talent-Calculator-master/src/components/Talent.tsx"],"sourcesContent":["import React from \"react\";\r\n\r\nimport \"./Talent.css\";\r\nimport talentBubble from \"../assets/talent-bubble.png\";\r\nimport { useTooltipPos } from \"../hooks/useTooltipPos\";\r\nimport { useTreeContext } from \"../TreeContext\";\r\nimport { useTalentContext } from \"../TalentContext\";\r\nimport { TalentTooltip } from \"./TalentTooltip\";\r\nimport { SquareButton } from \"./SquareButton\";\r\nimport { Arrow } from \"./Arrow\";\r\nimport {\r\n  getTalentRank,\r\n  isTalentMaxed,\r\n  isTalentUnlocked,\r\n  getPointsLeft,\r\n  getTalentData,\r\n} from \"../TalentContext/selectors\";\r\n\r\ninterface Props {\r\n  name: string;\r\n}\r\n\r\nexport const Talent: React.FC<Props> = ({ name }) => {\r\n  const tree = useTreeContext();\r\n  const { state, data, spendPoint, unspendPoint } = useTalentContext();\r\n\r\n  const { pos, icon, arrows } = getTalentData(data, tree, name);\r\n  const pointsLeft = getPointsLeft(state);\r\n  const rank = getTalentRank(state, tree, name);\r\n  const maxed = isTalentMaxed(state, data, tree, name);\r\n  const unlocked = isTalentUnlocked(state, data, tree, name);\r\n\r\n  const { anchorProps, tooltipProps, tooltipVisible } = useTooltipPos<\r\n    HTMLButtonElement,\r\n    HTMLDivElement\r\n  >(rank);\r\n\r\n  // TODO: too many edge cases here, hard to digest\r\n  // move to a selector?\r\n  const talentState = (() => {\r\n    if (pointsLeft < 1 && rank === 0) {\r\n      return \"locked\";\r\n    }\r\n    if (maxed) {\r\n      return \"maxed\";\r\n    }\r\n    if (unlocked) {\r\n      return \"unlocked\";\r\n    }\r\n    return \"locked\";\r\n  })();\r\n\r\n  const outlineColor = (() => {\r\n    if (talentState === \"unlocked\") {\r\n      return \"green\";\r\n    }\r\n    if (talentState === \"maxed\") {\r\n      return \"gold\";\r\n    }\r\n    return \"grey\";\r\n  })();\r\n\r\n  return (\r\n    <>\r\n      {arrows &&\r\n        arrows.map((arrow, i) => (\r\n          <Arrow key={i} active={unlocked} {...arrow} />\r\n        ))}\r\n      <div className=\"Talent-container\" style={{ gridArea: pos }}>\r\n        <SquareButton\r\n          onClick={() => spendPoint(tree, name)}\r\n          onRightClick={() => unspendPoint(tree, name)}\r\n          icon={icon}\r\n          disabled={talentState === \"locked\"}\r\n          outline={outlineColor}\r\n          {...anchorProps}\r\n        />\r\n        {talentState !== \"locked\" && (\r\n          <div\r\n            className={`Talent-pointCount Talent-pointCount--${outlineColor}`}\r\n            style={{ backgroundImage: `url(${talentBubble})` }}\r\n          >\r\n            {rank}\r\n          </div>\r\n        )}\r\n        {tooltipVisible && (\r\n          <TalentTooltip name={name} tree={tree} {...tooltipProps} />\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}